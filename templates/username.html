{% extends "layout/base.html" %}

{% block title %}Welcome – Tushar.dev(){% endblock %}

{% block extra_head %}
<style>
    :root {
        --py-yellow: #FFD43B;
        --card-bg: rgba(22, 27, 34, 0.88);
        --border: #30363d;
    }

    .card-glass {
        background: var(--card-bg);
        backdrop-filter: blur(20px);
        border: 1px solid var(--border);
        border-radius: 1.5rem;
    }

    .glow-py {
        box-shadow: 0 0 40px rgba(255, 212, 59, 0.5);
    }

    .btn-python {
        @apply w-full py-5 bg-gradient-to-r from-yellow-500 to-amber-600 
               hover:from-yellow-400 hover:to-amber-500 text-black font-bold 
               rounded-full border border-yellow-400/50 transform hover:scale-105 
               active:scale-95 shadow-2xl glow-py transition-all duration-300 text-xl;
    }

    /* EXACT SAME INPUT STYLE AS CHAT PAGE – WIDE, WHITE TEXT */
    .input-username {
        width: 100%;
        padding: 1rem 1.5rem;
        border-radius: 9999px;
        background: rgba(255, 255, 255, 0.08);
        border: 1px solid rgba(255, 212, 59, 0.3);
        color: white !important;
        font-size: 1.1rem;
        outline: none;
        transition: all 0.3s ease;
    }
    .input-username::placeholder {
        color: rgba(255, 255, 255, 0.6) !important;
    }
    .input-username:focus {
        border-color: #FFD43B;
        background: rgba(255, 255, 255, 0.12);
        box-shadow: 0 0 0 4px rgba(255, 212, 59, 0.2);
    }

    .error-msg {
        color: #ff6b6b;
        font-size: 0.875rem;
        margin-top: 0.5rem;
        display: none;
    }

    .skip-text {
        @apply text-yellow-400/80 hover:text-yellow-300 underline text-sm transition;
    }
</style>
{% endblock %}

{% block content %}
<div class="flex items-center justify-center min-h-screen relative z-10 px-4">

    <div class="relative z-10 card-glass p-12 rounded-3xl shadow-2xl text-center w-full max-w-md glow-py">
        
        <h1 class="text-6xl font-black text-white mb-4 tracking-tight">
            >>> <span style="color:#FFD43B;">Welcome</span><span style="color:#FFD43B;">.</span>
        </h1>
        <p class="text-gray-400 text-lg mb-10 font-light">
            Enter your name or email to continue
        </p>

        <form id="username-form" class="space-y-6">
            <div>
                <input
                    type="text"
                    id="username-input"
                    placeholder="you@example.com or John"
                    class="input-username"
                    autocomplete="off"
                />
                <span id="error-msg" class="error-msg block">
                    Please enter a name/email to continue.
                </span>
            </div>

            <button type="submit" class="btn-python">
                Continue
            </button>

            <button type="button" id="skip-btn" class="skip-text mt-4 block w-full">
                Skip (Not recommended)
            </button>
        </form>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
    const form = document.getElementById("username-form");
    const input = document.getElementById("username-input");
    const errorMsg = document.getElementById("error-msg");
    const skipBtn = document.getElementById("skip-btn");

    form.addEventListener("submit", e => {
        e.preventDefault();
        const val = input.value.trim();

        if (!val) {
            errorMsg.style.display = "block";
            return;
        }

        sessionStorage.setItem("username", val);
        window.location.href = "/home";
    });

    input.addEventListener("input", () => {
        errorMsg.style.display = "none";
    });

    skipBtn.addEventListener("click", () => {
        sessionStorage.setItem("username", "there");
        window.location.href = "/home";
    });
</script>
{% endblock %}